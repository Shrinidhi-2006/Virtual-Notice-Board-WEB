<div class="manage-users-container">
  <div class="page-header">
    <h3>ğŸ‘¥ Manage Users</h3>
    <p>View, edit, or remove users from the system</p>
  </div>

  <div class="user-table-card">
    <div class="table-wrapper">
      <table class="users-table">
        <thead>
          <tr>
            <th>Username</th>
            <th>Name</th>
            <th>Email</th>
            <th>Department</th>
            <th>Year</th>
            <th>Role</th>
            <th>Mobile Number</th>
            <th>Actions</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let u of users">
            <td data-label="Username">{{ u.username || '-' }}</td>
            <td data-label="Name">{{ u.name || '-' }}</td>
            <td data-label="Email">{{ u.gmail || '-' }}</td>
            <td data-label="Department">
              <span class="badge">{{ u.department || 'NA' }}</span>
            </td>
            <td data-label="Year">
              <span class="badge">{{ u.year || 'NA' }}</span>
            </td>
            <td data-label="Role">
              <span *ngIf="u.roles && u.roles.length > 0; else noRole" class="role-badge"
                [ngClass]="getRoleClass(u.roles[0].name)">
                {{ u.roles[0].name }}
              </span>
              <ng-template #noRole> - </ng-template>
            </td>
            <td data-label="Mobile Number">
              {{ u.mobileNumber || '-' }}
            </td>
            <td data-label="Actions" class="actions">
              <button class="edit-btn" (click)="editUser(u)">âœï¸ Edit</button>
              <button class="delete-btn" (click)="deleteUser(u.id)">ğŸ—‘ï¸ Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div *ngIf="users.length === 0" class="no-users">
      <div class="no-users-icon">ğŸ“­</div>
      <p>No users found in the system.</p>
    </div>
  </div>

  <!-- Pagination Controls -->
  <div *ngIf="totalPages > 1" class="pagination-container">
    <button class="page-btn" [disabled]="currentPage === 0" (click)="previousPage()">â¬… Prev</button>

    <button *ngFor="let page of [].constructor(totalPages); let i = index" class="page-number"
      [class.active]="i === currentPage" (click)="goToPage(i)">
      {{ i + 1 }}
    </button>

    <button class="page-btn" [disabled]="currentPage === totalPages - 1" (click)="nextPage()">Next â¡</button>
  </div>
</div>